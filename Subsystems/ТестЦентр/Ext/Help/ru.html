<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"><html><head><meta content="text/html; charset=utf-8" http-equiv="Content-Type"></meta><link rel="stylesheet" type="text/css" href="v8help://service_book/service_style"></link><meta name="GENERATOR" content="MSHTML 11.00.10570.1001"></meta></head><body>
<h1>Тест-центр 2.0</h1>
<p>Тест-центр – инструмент автоматизации многопользовательских нагрузочных испытаний информационных систем на платформе 1С:Предприятие 8. С его помощью можно моделировать работу предприятия без участия реальных пользователей, что позволяет, в частности, оценивать применимость, производительность и масштабируемость информационной системы в реальных условиях.</p>
<h1>Содержание</h1>
<ul><li><a href="#Function">Назначение</a> 
</li><li><a href="#Features">Возможности</a> 
</li><li><a href="#Characteristics">Ключевые отличия от версии 1.2</a> 
</li><li><a href="#Restricitons">Ограничения текущей версии</a> 
</li><li><a href="#Usage">Работа с Тест-центром</a> </li></ul><h1 id="Function">Назначение</h1>
<p>Тест-центр предназначен для:</p>
<ul><li>оценки производительности информационной системы или отдельных ее частей при заданных параметрах модели предприятия с целью: 
<ul><li>выбора оборудования; 
</li><li>формулирования эксплуатационных требований; 
</li><li>оценки применимости информационной системы; </li></ul></li><li>оценки масштабируемости информационной системы при изменении: 
<ul><li>объема информационной базы; 
</li><li>количества одновременно работающих пользователей; 
</li><li>нагрузки на систему; </li></ul></li><li>оценки изменения показателей производительности при изменении: 
<ul><li>функциональности системы (доработка системы или от-дельных алгоритмов); 
</li><li>конфигурации оборудования; 
</li><li>выявления проблем, возникающих только при многопользова-тельской работе (конфликты блокировок и т.п.). </li></ul></li></ul><p class="Important">ВАЖНО! Тест-центр предназначен для работы исключительно в клиент-серверном варианте использования 1С:Предприятия. Работа в файловом варианте не поддерживается.</p>
<h1 id="Features">Основные возможности</h1>
<p>Основные возможности Тест-центра:</p>
<ul><li>описание многопользовательских сценариев тестирования; 
</li><li>автоматический запуск сценариев тестирования и контроль хода их выполнения; 
</li><li>сбор, хранение и анализ результатов тестирования. </li></ul><h1 id="Characteristics">Ключевые отличия версии 2.0</h1>
<p>Версия 2.0 является полностью переработанным программным продуктом, имеющим ряд существенных отличий от Тест-центра версии 1.2. Ниже перечислены основные отличия Тест-центра 2 от предыдущей версии.</p>
<h2>Работа с 1С:Предприятием 8.2</h2>
<p>Тест-центр 2.0 предназначен для тестирования информационных баз, работающих под управлением 1С:Предприятия версии 8.2.10 и выше. Работа с 1С:Предприятием предыдущих версий не поддерживается. Если необходио тестировать информационные базы, работающие под управлением более ранних версий 1С:Предприятия, следует использовать версию Тест-центра 1.2.</p>
<h2>Изменение архитектуры. Агент Тест-центра</h2>
<p>В Тест-центре 2.0 изменена схема управления процессом тестирования, а именно добавлен новый тип клиента Тест-центра – Агент Тест-центра.</p>
<p>В версии 1.2 каждое виртуальное рабочее место управлялось непосредственно Тест-центром (управляющим подключением). То есть, каждый ВРМ периодически опрашивал тестовую информационную базу, считывая из нее команды и записывая в нее результаты выполнения действий.</p>
<p>В Тест-центре 2.0 все виртуальные пользователи (понятия «Виртуальное рабочее место» в ТЦ 2.0 не существует), запущенные на одном компьютере, имеют одного «представителя», который берет на себя все общение с управляющим подключением Тест-центра. Этот представитель называется Агентом Тест-центра и должен быть запущен на всех компьютерах, которые будут использоваться для запуска виртуальных пользователей.</p>
<p>Таким образом, если в Тест-центре 1.2 использовались два типа клиентских подключений (Тест-центр и Виртуальное рабочее место), то в Тест-центре 2.0 к ним добавился третий – Агент Тест-центра.</p>
<p>Это позволило решить следующие важные задачи:</p>
<ul><li>Автоматический запуск большого количества виртуальных пользователей; 
</li><li>Уменьшение служебной (не имеющей отношения к тестированию) нагрузки, создаваемой Тест-центром </li></ul><h2>Запуск виртуальных пользователей</h2>
<p>В Тест-центре 1.2, как правило, приходилось применять внесистемные средства (BAT-файлы и т.п.) для запуска большого количества пользователей. Системные средства автоматического запуска ВРМ Тест-центра 1.2 работали через DCOM и требовали сложной настройки прав доступа. Кроме того, процесс автоматического запуска большого количества пользователей мог занять значительное время, поскольку запуск осуществлялся последовательно. Кроме того, эта технология не позволяла запускать WEB-клиентов.</p>
<p>Тест-центр 2.0 позволяет автоматически запустить любое количество виртуальных пользователей (в том числе в WEB-клиентов) на удаленных компьютерах. Запуск выполняется непосредственно на рабочем компьютере Агента с высокой степенью параллельности, что позволило значительно ускорить процесс запуска. Возможность ручного запуска виртуальных пользователей в Тест-центре 2.0 отсутствует.</p>
<h2>Уменьшение служебной нагрузки Тест-центра.</h2>
<p>Все интерфейсы Тест-центра 2.0 реализованы как управляемые формы, что позволяет запускать любой из трех интерфейсов Тест-центра в тонком или WEB клиенте. Это означает, что в новой версии вы можете проводить тесты, в которых участвуют виртуальные пользователи, запущенные в любом клиенте – толстом, тонком или WEB. Поддерживается возможность создания «смешанных» тестов с запуском разных виртуальных пользователей в разных клиентах.</p>
<p>Вся содержательная часть управляющего подключения Тест-центра реализована на сервере, что позволяет легко запускать тесты без использования интерфейсов Тест-центра (например, из командной строки или из внешней обработки).</p>
<h2>Использование внутренних обработок</h2>
<p>Тест-центр 1.2 позволял использовать для тестирования только внешние обработки, которые сохранялись в ХранилищеЗначений. Во время тестирования эти обработки автоматически создавались в виде внешних обработок и запускались из каталога временных файлов. Это создавало определенные трудности при отладке тестовых обработок.</p>
<p>В Тест-центре 2 имеется возможность использовать как внутренние, так и внешние обработки. Это позволяет полноценно отлаживать тесты любой сложности.</p>
<h1 id="Restricitons">Ограничения текущей версии</h1>
<p>Тестовая версия тест-центра 2.0 имеет несколько функциональных оганичений, которые планируется устранить при выпуске финальной версии.</p>
<h3>Работа с обычными формами</h3>
<p>В версии Тест-центра 2.0 имеется ограничение на использование обычных (неуправляемых) форм в тестовых обработках. Сейчас можно использовать только управляемые формы. Для тестирования неуправляемых форм используйте предыдущую версию Тест-центра.</p>
<h3>Работа с операционной системой Linux</h3>
<p>В версии Тест-центра 2.0 не поддерживается работа под управлением операционной системы Linux на клиентской или на серверной стороне.</p>
<h1>Основные принципы работы</h1>
<h2>Общая архитектура</h2>
<p>Тест-центр представляет собой конфигурацию, реализующую механизм управления процессом тестирования. Для тестирования информационной базы, необходимо объединить конфигурацию Тест-центра с конфигурацией тестируемой базы при помощи операции сравнения и объединения конфигураций. В результате этого объединения к метаданным тестируемой базы будут добавлены объекты и общие модули, необходимые для работы Тест-центра.</p>
<p>Тест-центр содержит три основных интерфейса:</p>
<ul><li>Управляющее подключение 
</li><li>Агент 
</li><li>Виртуальный пользователь </li></ul><p>Во время выполнения теста управляющее подключение контролирует работу Виртуальных пользователей (ВП), которые выполняют тестовые действия. Кроме того, интерфейс управляющего подключения предназначен для создания сценариев, просмотра результатов тестов и т.п.</p>
<p>Поскольку виртуальные пользователи могут быть запущены на удаленных компьютерах, управляющее подключение взаимодействует с ними не напрямую, а через Агента, запущенного на том же компьютере, где и виртуальные пользователи. Таким образом, схема взаимодействия выглядит следующим образом:</p>
<p>Управляющее подключение &lt;-&gt; Агент &lt;-&gt; Виртуальный пользователь.</p>
<p>Взаимодействие между Управляющим подключением и агентом реализовано через тестируемую информационную базу. Взаимодействие между Агентом и Виртуальным пользователем – напрямую через общие ресурсы компьютера, на котором они запущены. Один Агент может управлять любым количеством Виртуальных пользователей, запущенных на данном компьютере.</p>
<p>Виртуальные пользователи запускаются автоматически Агентом (по команде Управляющего подключения).</p>
<p>Виртуальные пользователи работают на основании сценария тестирования.</p>
<h2>Сценарий</h2>
<p>Сценарий тестирования полностью определяет все параметры теста. А именно:</p>
<ul><li>сколько виртуальных пользователей будет запущено; 
</li><li>на каких компьютерах, в каких клиентах и от какого имени пользователя будет работать каждый ВП; 
</li><li>какие обработки и с какими настройками будет выполнять каждый ВП, то есть какую Роль он будет играть в данном тестировании; </li></ul><p>Фактически, сценарий представляет собой список строк, имеющих следующие поля:</p>
<ul><li>«Роль». Обработка, которую будут выполнять ВП и настройки этой обработки. 
</li><li>«Пользователь». Пользователь информационной базы, от имени которого будет выполняться обработка. 
</li><li>«Клиент». Тип клиента 1С:Предприятия (толстый, тонкий, WEB) и параметры запуска клиента. 
</li><li>«Количество». Сколько таких виртуальных пользователей нужно запустить. </li></ul><h2>Роль</h2>
<p>Роль полностью определяет действия, которые будет выполнять виртуальный пользователь. Иначе говоря, Роль это – Обработка и ее настройки.</p>
<p>В версии Тест-центра 1.2 каждая Роль принадлежала определенному Сценарию. В версии 2 эта зависимость исключена. Роль – независимая от Сценария сущность, которая может быть использована многократно в одном и том же или в нескольких разных сценариях.</p>
<h2>Обработка</h2>
<p>Обработка – это внешняя или внутренняя обработка 1С:Предприятия, которая будет запускаться Виртуальным пользователем для выполнения необходимых тестовых действий.</p>
<p>Таким образом, каждое тестовое действие, выполняемое виртуальными пользователями, должно быть предварительно запрограммировано в виде обработки. Обработка может содержать произвольные настройки, которые используются для параметризации выполняемых действий. </p>
<p>Настройки – это реквизиты Обработки, которые могут быть использованы для управления работой тестовой обработки. Состав и назначение настроек определяется разработчиком обработки. Значения настроек указываются при создании Роли. Например, количество документов, количество номенклатуры и т.п.</p>
<p>В результате выполнения тестовых действий могут быть измерены и зафиксированы числовые значения, которые затем используются для оценки производительности системы (например «Время записи и проведения документа», «Количество ошибок блокировки»). Такие значения называются показателями производительности. Состав и назначение показателей производительности определяются программистом тестовой обработки. Значения показателей вычисляются и фиксируются в коде обработки.</p>
<p>Обработка должна содержать некоторые обязательные функции и реквизиты, которые используются для управления тестовой обработкой из Тест-центра. В частности, тестовая обработка должна содержать экспортную функцию ТЦВыполнить(), которая будет вызвана при выполнении теста. Новая обработка создается на основании шаблона, входящего в состав конфигурации Тест-центра. Шаблон содержит заголовки всех необходимых процедур и функций, однако код этих процедур должен быть написан программистом.</p>
<p>Тестовая обработка может использовать стандартные процедуры и функции, входящие в состав Тест-центра и предназначенные для выполнения типичных действий. Например:</p>
<ul><li>Записи произвольной информации в протокол Тест-центра; 
</li><li>Записи значений показателей производительности. </li></ul><h1 id="Usage">Работа с Тест-центром</h1>
<p>Работа с Тест-центром включает следующие основные этапы:</p>
<ul><li><a href="#Preparation">Подготовка тестовой информационной базы;</a> 
</li><li><a href="Catalog.ТЦОбработки/Help">Программирование обработок;</a> 
</li><li><a href="Catalog.ТЦРоли/Help">Описание ролей;</a> 
</li><li><a href="Catalog.ТЦКомпьютеры/Help">Описание компьютеров;</a> 
</li><li><a href="Catalog.ТЦКлиенты/Help">Описание клиентов;</a> 
</li><li><a href="Catalog.ТЦПользователи/Help">Описание пользователей;</a> 
</li><li><a href="Catalog.ТЦАгенты/Help">Запуск Агентов;</a> 
</li><li><a href="Catalog.ТЦСценарии/Help">Создание сценария и запуск теста;</a> 
</li><li><a href="Document.ТЦТест/Help">Анализ результатов.</a> </li></ul><h3 id="Preparation">Подготовка тестовой информационной базы</h3>
<p>Конфигурация Тест-центр встраивается в конфигурацию тестируемой информационной базы при помощи операции сравнения и объединения конфигураций. После объединения в информационной базе появляются объекты конфигурации, необходимые для работы Тест-центра. А именно:</p>
<ul><li>Подсистема Тест-центр; 
</li><li>Общие модули, общие формы, общие макеты, общие картинки, справочники, документы, перечисления, обработки и регистры сведений, необходимые для работы Тест-центра. Все эти объекты конфигурации имеют имена, начинающиеся с префикса «ТЦ». </li></ul><p>При объединении конфигурации Тест-центр с тестируемой конфигурацией в пункте «Свойства» основной конфигурации окна сравнения, объединения конфигураций следует оставить выделенным модуль управляемого и обычного приложения и выставить для них «Режим объединения и порядок подчиненных объектов» как «Объединить с приоритетом основной конфигурации». Остальные настройки объединения должны остаться со значениями по умолчанию. После объединения необходимо открыть модули управляемого и обычного приложения и убрать комментарии строк кода обрамленные директивами //{{MRG[ &lt;-&gt; ] и //}}MRG[ &lt;-&gt; ]. В результате объединения в этих модулях в процедуру ПриНачалеРаботыСистемы() должен появится следующий текст:</p>
<p class="SourceCode"></p><pre>Попытка
	ТЦКлиент.ОбработатьПараметрЗапуска(ПараметрЗапуска);
Исключение
	ТЦОбщий.ЗаписатьВЖурнал(ИнформацияОбОшибке(), "Тест-центр");
КонецПопытки;
</pre>
<p></p>
<p>Этот код необходим для автоматического запуска виртуальных пользователей.</p></body></html>